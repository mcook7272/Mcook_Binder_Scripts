# -*- coding: utf-8 -*-
"""
Created on Wed Sep  8 08:55:21 2021

@author: mcook49
"""

import re
r1 = '((?:JHM#)\d+)[\s\])]'
r2 = '((?:EPIC#)\d+)[\s\])]'
text  = """
hormone therapy (EPIC#40664)Core | 07 | Enc | cardiac or respiratory failure (EPIC#40661)Core | 08 | Enc | mechanical ventilation (EPIC#13146)Core | 09 | Enc | active cancer (EPIC#34558)Core | 10 | Enc | recent surgery or trauma (EPIC#40659)Core | 11 | Enc | sepsis (EPIC#40674)Core | 12 | Enc | acute infection or rheumatic disorder (EPIC#40663)Core | 13 | Enc | postpartum (EPIC#49835)Core | 14 | Enc | Lower extremity paresis < 3 months (EPIC#19428)Core | 15 | Enc | No Core Risk Factors (JHM#2006)Core | count | Enc | Core Risk Factor Count (JHM#2007)MedicineMedicine | 01 | Enc | age ≥ 70 years (EPIC#53979)
Medicine | 01 | Enc | age ≥ 70 years (EPIC#53979)Medicine | score | Enc | VTE risk score (EPIC#40668)SurgerySurgery | 01 | Enc | age >40 years (EPIC#40679)Surgery | 02 | Enc | central venous catheter (EPIC#40675)Surgery | 03 | Enc | selective estrogen receptor modulators (EPIC#40677)OrthoOrtho | vte risk | Enc | low or high (JHM#1509)Ortho | bleeding risk | Enc | standard or high (JHM#1510)PediatricPediatric | 01   | Enc | No risk factors (JHM#2006)Pediatric | 02A | Enc | Age 0 – 14 (JHM#6340)Pediatric | 02   | Enc | Age 14 – 17 (JHM#6341)Pediatric | 03   | Enc | 18 years or older  (EPIC#31000020852)Pediatric | 04   | Enc | Baseline limited mobility (i.e. Cerebral Palsy, Spina Bifida,quadriplegic) (EPIC#40657)Pediatric | 05   | Enc | Bedrest with bathroom privileges for > 72 hours(EPIC#53981)Pediatric | 06   | Enc | Totally bed bound for > 72 hours (acute immobility) (EPIC#18134)Pediatric | 07   | Enc | Active renal disease (i.e., ESRD, nephrotic syndrome)(EPIC#34189)Pediatric | 08   | Enc | Active systemic infection / Systemic inflammatory response(EPIC#31000009346)Pediatric | 09   | Enc | BMI greater than or equal to 27 (EPIC#4472)Pediatric | 10   | Enc | Central venous catheter (EPIC#40675)Pediatric | 11   | Enc | Chronic estrogen use (EPIC#40677)Pediatric | 12   | Enc | Heart failure or active malignancy  (EPIC#40661)Pediatric | 12A | Enc | Active malignancy  (EPIC#21238)Pediatric | 13   | Enc | History of VTE within the past year (EPIC#40656)Pediatric | 14   | Enc | Inflammatory GI/Rheum active flare  (EPIC#40663)Pediatric | 15   | Enc | Known Thrombophilia (EPIC#4850)Pediatric | 16   | Enc | Major burns / trauma / surgery within 3 months(EPIC#40659)Pediatric | 17   | Enc | Mechanical ventilation (EPIC#13146)Pediatric | 18   | Enc | Acute Spinal Cord Injury  (EPIC#35458)Pediatric | 19   | Enc | Major or High VTE risk surgery  (JHM#6342)Pediatric | 20   | Enc | Minor or Low VTE risk surgery  (JHM#6343)Pediatric | count | Enc | Peds Risk Factor Count (JHM#2020)Pediatric | score | Enc | Pediatric VTE risk score (JHM#2021)NeurologyNeurology | 01 | Enc | age >40 years (EPIC#40679)NeurosurgeryNeurosurgery | 01 | Enc | age >40 years (EPIC#40679)
Neurosurgery | 01 | Enc | age >40 years (EPIC#40679)Neurosurgery | 02 | Enc | 2-Stage Procedures (e.g., anterior and posterior spinesurgery) (EPIC#39304)OncologyOncology | 01 | Enc | Mass compressing venous return (EPIC#4652)TraumaTrauma | 01 | Enc | age >40 years (EPIC#40679)Trauma | 02 | Enc | spinal cord injury (EPIC#35458)Trauma | 03 | Enc | lower extremity fracture (EPIC#RSMS0026)Trauma | 04 | Enc | pelvic fracture (EPIC#4099)Trauma | 05 | Enc | severe head injury (EPIC#31000004892)Trauma | 06 | Enc | injury severity score > 8 (EPIC#1023)Trauma | 07 | Enc | shock at admission (SBP < 90) (EPIC#66376)Trauma | 08 | Enc | femoral venous line insertion (EPIC#PROC0142)ObstetricsAntepartumOB | 01 | Enc | VTE during current pregnancy, on long-term anticoagulation, orHistory of 2 or more VTE? (JHM#2355)OB | 02 | Enc | Prior single VTE? (JHM#2356)OB | 03 | Enc | Prior VTE details (JHM#2338)OB | 04 | Enc | First degree relative with VTE? (JHM#2357)OB | 05 | Enc | Thrombophilia details (JHM#2330)IntrapartumOB | 06 | Enc | Current BMI >= 40? (JHM#2358)OB | 07 | Enc | Unfavorable cervix? (Bishop’s score <= 6) (JHM#2359)Post PartumMajorOB | 08 | Enc | History of 2 or more VTE (JHM#2326)OB | 09 | Enc | On long-term anticoagulation outside of pregnancy (EPIC#13523)OB | 10 | Enc | On treatment doses of anticoagulation antepartum (EPIC#71703)OB | 11 | Enc | Prior VTE (therapeutic treatment) (EPIC#40656)ModerateOB | 12 | Enc | Thrombophilia present (EPIC#4850)OB | 13 | Enc | Peripartum/postpartum infection (JHM#2337)OB | 14 | Enc | History of non obstetric surgery in past 4 weeks (EPIC#0377)OB | 15 | Enc | Obesity (Current – not prepregnancy - BMI >= 40) (EPIC#4472)OB | 16 | Enc | Bedrest > 3 days prior to delivery (EPIC#40657)OB | 17 | Enc | Central venous catheterization (EPIC#40675)OB | 18 | Enc | Preeclampsia (EPIC#2412)OB | 19 | Enc | Postpartum hemorrhage (> 1.5 liter) (EPIC#13390)OB | 20 | Enc | Prior VTE (prophylaxis) (JHM#2333)MinorOB | 21 | Enc | No risk factors (JHM#2006)OB | count | Enc | OB Risk Factor Count (JHM#2147)
Core1Enchistory ofDVT/PE(EPIC#40656)419544Has problem from grouperVCG: EDG ICD-10 VTEFOR SMARTFORM[30443001] or MedicalHistory diagnosis fromgrouper VCG: EDG ICD-10VTE FOR SMARTFORM[30443001].Core2Encanticipatedbedrest over 3days(EPIC#40657)419547Core3Enchypercoagulablestate(EPIC#4850]419548Has problem from grouperVCG: EDG ICD-9 JCCMHYPERCOAGULABLESTATE-VTE [100711]Core4Encacute strokewith paresis <3months(EPIC#40673)419549Core5Encobesity(EPIC#4472)419550Returns true if the patient'sBody Mass Index (EPT18035) is >= 30 or FLO RBMI [301070] is >= 30>Note: Both height andweight must bedocumented on theencounter prior to the riskassessment.Core6Encactive hormonetherapy(EPIC#40664)419551Core7Enccardiac orrespiratoryfailure419552Has problem from grouperVCG: EDG ICD-10 HEARTFAILURE FOR
failure(EPIC#40661)FAILURE FORSMARTFORM [30443002]or EDG ICD-10RESPIRATORY FAILUREFOR SMARTFORM[30443003]. Or has MedicalHistory diagnosis fromgrouper VCG: EDG ICD-10HEART FAILURE FORSMARTFORM [30443002]or EDG ICD-10RESPIRATORY FAILUREFOR SMARTFORM[30443003].Core8Encmechanicalventilation(EPIC#13146)419553Has active procedure fromgrouper VCG: EAP JCCMMECHANICALVENTILATION [101204].Core9Encactive cancer(EPIC#34558)419554Core10Encrecent surgeryor trauma(EPIC#40659)419555Core11Encsepsis(EPIC#40674)419556Has an Active Hospitalproblem for the currentencounter from grouperVCG: JHC CM ICD-9SEPSIS [30440104921]Core12Encacute infectionor rheumaticdisorder(EPIC#40663)419557Core13Encpostpartum(EPIC#49835)419558Time that has passed sincethe most recent newborn’sbirth instant is <= 42 daysago (six weeks)Surgery1Encage >40 years(EPIC#40679)419560Age is >= 40 AND <= 105(unknown birth date)Surgery2Enccentral venouscatheter(EPIC#40675)419561Has active procedure fromgrouper VCG: EAP JCCMCENTRAL VENOUSCATHETER [100712] ORhas active ‘CVC Line’ LDAdocumented.
documented.Surgery3Encselectiveestrogenreceptormodulators(EPIC#40677)419562Medicine1Encage ≥ 70 years(EPIC#53979)419559Age is >= 70 AND <= 105(unknown birth date
"""
sde1 = re.findall(r1, text)
sde1.sort()
sde2 = re.findall(r2, text)
sde2.sort()
sde_all = list(set(sde1 + sde2))
sde_all.sort()
print(sde_all)
